(this["webpackJsonptracking-musique"]=this["webpackJsonptracking-musique"]||[]).push([[0],{26:function(e,t,n){e.exports={background:"splash_background__1a0rE",container:"splash_container__LjTQA"}},29:function(e,t,n){e.exports={background:"signup_background__1QYS0",container:"signup_container__3C6LB"}},30:function(e,t,n){e.exports={background:"login_background__39Ha4",container:"login_container__YWJyi"}},33:function(e,t,n){e.exports={background:"App_background__1gHB6"}},53:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n(19),s=n.n(c),i=n(10),o=n(21),u=n(5),l=n(6),d=n(7),j=n(9),b=n.n(j),h=function(e){return{type:"SET_USER",payload:e}},p=function(e){return{type:"SET_LOGIN",payload:e}},O=(n(53),function(e){var t=e.classType,n=e.title,r=e.submit;return Object(a.jsx)(a.Fragment,{children:r?Object(a.jsx)("button",{type:"submit",className:"button ".concat(t),children:n.toUpperCase()}):Object(a.jsx)("button",{type:"button",className:"button ".concat(t),children:n.toUpperCase()})})});O.defaultProps={submit:!1};var f=O,x=n(26),m=n.n(x),v=Object(i.b)((function(e){return{login:e.login}}))((function(e){var t=e.login,n=m.a.background,r=m.a.container;return t?Object(a.jsx)(d.a,{to:"/"}):Object(a.jsx)("div",{className:n,children:Object(a.jsxs)("div",{className:r,children:[Object(a.jsx)("h1",{className:"title",children:"Spotify Stats"}),Object(a.jsx)("p",{children:"You are what you measure"}),Object(a.jsx)(l.b,{to:"/signup",children:Object(a.jsx)(f,{classType:"primary",title:"sign up"})}),Object(a.jsx)(l.b,{to:"/login",children:Object(a.jsx)(f,{classType:"secondary",title:"log in"})})]})})})),g=n(15),y=n(3),k=n.n(y),w=n(8),N=n(2),S=(n(56),function(e){var t=e.placeholder,n=e.name,r=e.value,c=e.type,s=e.onchange;return Object(a.jsx)("input",{className:"input",name:n,type:c,placeholder:t,value:r,onChange:function(e){return s(e.target)}})});S.defaultProps={onchange:function(){},type:"text",value:""};var _=S,T=n(32),U=n.n(T),A="https://stats-musique.herokuapp.com/api/v1",E=function(){var e=Object(w.a)(k.a.mark((function e(){var t,n,a,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Headers,n="Basic ".concat(btoa("".concat("c44c077a3a9f449f9a1e18fc0243b62c",":").concat("39083b1406714bd5acc5f69f73a197a8"))),t.append("Content-Type","application/x-www-form-urlencoded"),t.append("Authorization",n),(a=new URLSearchParams).append("grant_type","client_credentials"),r={method:"POST",headers:t,body:a,redirect:"follow"},"https://accounts.spotify.com/api/token",e.next=10,fetch("https://accounts.spotify.com/api/token",r);case 10:return c=e.sent,e.abrupt("return",c.json());case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(w.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new U.a,e.next=3,E();case 3:return n=e.sent,e.next=6,t.setAccessToken(n.access_token);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return a=e.sent,e.prev=3,e.next=6,a.searchArtists(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n=e.t0;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return a=e.sent,e.prev=3,e.next=6,a.getArtist(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n=e.t0;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return a=e.sent,e.prev=3,e.next=6,a.getArtists(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n=e.t0;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return a=e.sent,e.prev=3,e.next=6,a.getArtistTopTracks(t,"ES");case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n=e.t0;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,r,c,s,i,o,u,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.email,r=t.password,(c=new Headers).append("Content-Type","application/json"),s=JSON.stringify({user:{name:n,email:a,password:r}}),i={method:"POST",headers:c,body:s,redirect:"follow"},o="".concat(A,"/users"),e.next=8,fetch(o,i);case 8:return u=e.sent,e.next=11,null===u||void 0===u?void 0:u.json();case 11:return l=e.sent,e.abrupt("return",{data:l,status:u.status});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,r,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Headers).append("Authorization",t),a={method:"POST",headers:n,redirect:"follow"},r="".concat(A,"/valid_token"),e.next=6,fetch(r,a);case 6:return c=e.sent,e.next=9,null===c||void 0===c?void 0:c.json();case 9:return s=e.sent,e.abrupt("return",{data:s,status:c.status});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,r,c,s,i,o,u;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,(r=new Headers).append("Content-Type","application/json"),c=JSON.stringify({user:{email:n,password:a}}),s={method:"POST",headers:r,body:c,redirect:"follow"},i="".concat(A,"/tokens"),e.next=8,fetch(i,s);case 8:return o=e.sent,e.next=11,null===o||void 0===o?void 0:o.json();case 11:return u=e.sent,e.abrupt("return",{data:u,status:o.status});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",redirect:"follow"},a="".concat(A,"/user_artists/").concat(t),e.next=4,fetch(a,n);case 4:return r=e.sent,e.next=7,null===r||void 0===r?void 0:r.json();case 7:return c=e.sent,e.abrupt("return",{data:c,status:r.status});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(w.a)(k.a.mark((function e(t,n,a,r){var c,s,i,o,u,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new Headers).append("Authorization",r),c.append("Content-Type","application/json"),s=JSON.stringify({artist:{id_string:t,name:n,photoUrl:a}}),i={method:"POST",headers:c,body:s,redirect:"follow"},o="".concat(A,"/artists"),e.next=8,fetch(o,i);case 8:return u=e.sent,e.next=11,null===u||void 0===u?void 0:u.json();case 11:return l=e.sent,e.abrupt("return",{data:l,status:u.status});case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),G=function(){var e=Object(w.a)(k.a.mark((function e(t,n,a,r,c){var s,i,o,u,l,d;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new Headers).append("Authorization",c),s.append("Content-Type","application/json"),i=JSON.stringify({stat:{hours:a,track_name:n,spotify_track_id:t},id_string:r}),o={method:"POST",headers:s,body:i,redirect:"follow"},u="".concat(A,"/stats"),e.next=8,fetch(u,o);case 8:return l=e.sent,e.next=11,null===l||void 0===l?void 0:l.json();case 11:return d=e.sent,e.abrupt("return",{data:d,status:l.status});case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),z=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",redirect:"follow"},a="".concat(A,"/artists/").concat(t),e.next=4,fetch(a,n);case 4:return r=e.sent,e.next=7,null===r||void 0===r?void 0:r.json();case 7:return c=e.sent,e.abrupt("return",{data:c,status:r.status});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a,r,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Headers).append("Authorization",t),a={method:"GET",headers:n,redirect:"follow"},r="".concat(A,"/user_artist_stats"),e.next=6,fetch(r,a);case 6:return c=e.sent,e.next=9,null===c||void 0===c?void 0:c.json();case 9:return s=e.sent,e.abrupt("return",{data:s,status:c.status});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K="TOKEN_VAR",Y=n(29),q=n.n(Y),Q=(n(57),function(e){var t=e.title,n=e.subtitle;return Object(a.jsx)("div",{className:"no-content",children:Object(a.jsxs)("div",{className:"no-content-container",children:[Object(a.jsx)("h3",{children:t}),""!==n&&Object(a.jsx)("p",{children:n})]})})});Q.defaultProps={subtitle:""};var W=Q,V={setLogin:p,setUser:h},X=Object(i.b)((function(e){return{login:e.login}}),V)((function(e){var t=e.history,n=e.setLogin,c=e.setUser,s=e.login,i=q.a.background,o=q.a.container,j=Object(r.useState)(!1),h=Object(N.a)(j,2),p=h[0],O=h[1],x={name:"",email:"",password:"",error:!1},m=Object(r.useState)(x),v=Object(N.a)(m,2),y=v[0],S=v[1],T=function(){var e=Object(w.a)(k.a.mark((function e(a){var r,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""===y.name||""===y.email||""===y.password){e.next=16;break}return O(!0),e.next=6,H(y);case 6:if(201!==(r=e.sent).status){e.next=14;break}return e.next=10,J(y);case 10:401!==(s=e.sent).status&&(b.a.set(K,s.data.token),n(!0),c(s.data.userId),S(x),t.push("/"),t.go(0)),e.next=15;break;case 14:422===r.status&&S({error:!0});case 15:O(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t="checkbox"===e.type?e.checked:e.value,n=e.name;S(Object(u.a)(Object(u.a)({},y),{},Object(g.a)({},n,t)))};return s?Object(a.jsx)(d.a,{to:"/artists"}):Object(a.jsx)("div",{className:i,children:p?Object(a.jsx)(W,{title:"Loading..."}):Object(a.jsxs)("div",{className:o,children:[Object(a.jsxs)("form",{onSubmit:T,children:[y.error&&Object(a.jsx)("p",{children:"Email already exists"}),Object(a.jsx)(_,{placeholder:"Name",name:"name",value:y.name,onchange:U}),Object(a.jsx)(_,{placeholder:"Email",name:"email",type:"email",value:y.email,onchange:U}),Object(a.jsx)(_,{placeholder:"Password",name:"password",type:"password",value:y.password,onchange:U}),Object(a.jsx)(f,{classType:"primary",title:"sign up",submit:!0})]}),Object(a.jsx)(l.b,{to:"/login",children:Object(a.jsx)(f,{classType:"secondary",title:"log in"})})]})})})),Z=n(33),$=n.n(Z),ee=n(30),te=n.n(ee),ne=function(e){var t=e.setLogin,n=e.setUser,c=e.login,s=Object(r.useState)(!1),i=Object(N.a)(s,2),o=i[0],j=i[1],h=Object(d.g)(),p=te.a.background,O=te.a.container,x=Object(r.useState)({email:"",password:"",error:!1}),m=Object(N.a)(x,2),v=m[0],y=m[1],k=function(e){var t="checkbox"===e.type?e.checked:e.value,n=e.name;y(Object(u.a)(Object(u.a)({},v),{},Object(g.a)({},n,t)))};return c?Object(a.jsx)(d.a,{to:"/"}):Object(a.jsx)("div",{className:p,children:o?Object(a.jsx)(W,{title:"Loading..."}):Object(a.jsxs)("div",{className:O,children:[Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===v.email||""===v.password||(j(!0),J(v).then((function(e){401!==e.status?(b.a.set(K,e.data.token),t(!0),n(e.data.userId),h.push("/"),h.go(0)):(y({error:!0}),j(!1))})))},children:[v.error&&Object(a.jsx)("p",{children:"Invalid email/password. Try again!"}),Object(a.jsx)(_,{placeholder:"Email",name:"email",type:"email",value:v.email,onchange:k}),Object(a.jsx)(_,{placeholder:"Password",name:"password",type:"password",value:v.password,onchange:k}),Object(a.jsx)(f,{classType:"primary",title:"log in",submit:!0})]}),Object(a.jsx)(l.b,{to:"/signup",children:Object(a.jsx)(f,{classType:"secondary",title:"sign up"})})]})})};ne.defaultProps={login:!!b.a.get(K)};var ae={setLogin:p,setUser:h},re=Object(i.b)((function(e){return{login:e.login}}),ae)(ne),ce=(n(58),function(e){var t=e.photoUrl,n=e.artistName,r=e.tracks;return Object(a.jsx)("div",{className:"container-items",children:Object(a.jsxs)("div",{className:"content-items",children:[Object(a.jsx)("img",{src:t,alt:n}),Object(a.jsxs)("div",{className:"info-items",children:[Object(a.jsx)("p",{className:"title-artist",children:n}),0!==r&&Object(a.jsx)("p",{className:"subtitle-artist",children:" ".concat(r," songs")})]})]})})});ce.defaultProps={tracks:0};var se=ce,ie=n.p+"static/media/icons.9241ad0c.svg",oe=(n(59),function(e){var t=e.active;return Object(a.jsx)("div",{className:"container-tab",children:Object(a.jsxs)("div",{className:"content-tab",children:[Object(a.jsx)("div",{className:"icon library ".concat("1"===t&&"active"),children:Object(a.jsxs)(l.b,{to:"/",children:[Object(a.jsx)("svg",{className:"library-icon",children:Object(a.jsx)("use",{href:"".concat(ie,"#library")})}),Object(a.jsx)("span",{children:"Library"})]})}),Object(a.jsx)("div",{className:"icon results ".concat("2"===t&&"active"),children:Object(a.jsxs)(l.b,{to:"/results",children:[Object(a.jsx)("svg",{className:"results-icon",children:Object(a.jsx)("use",{href:"".concat(ie,"#results")})}),Object(a.jsx)("span",{children:"Results"})]})}),Object(a.jsxs)("div",{className:"icon profile ".concat("3"===t&&"active"),children:[Object(a.jsx)("svg",{className:"profile-icon",children:Object(a.jsx)("use",{href:"".concat(ie,"#profile")})}),Object(a.jsx)("span",{children:"Profile"})]})]})})}),ue=(n(60),function(e){var t=e.children,n=e.tabActive,r=e.playerActive,c=e.trackId,s="https://open.spotify.com/embed/track/".concat(c);return Object(a.jsxs)("div",{className:"phone-container",children:[Object(a.jsx)("div",{className:"phone-content",children:t}),r&&Object(a.jsx)("iframe",{title:c,src:s,height:"100",frameBorder:"0",allowtransparency:"true",allow:"encrypted-media",className:"iframeStyle"}),Object(a.jsx)(oe,{active:n})]})});ue.defaultProps={playerActive:!1,trackId:""};var le=ue,de=(n(61),function(e){var t=e.user,n=Object(r.useState)([]),c=Object(N.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)([]),u=Object(N.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(!0),h=Object(N.a)(b,2),p=h[0],O=h[1];return Object(r.useEffect)((function(){0!==t&&R(t).then((function(e){return e.data.included.map((function(e){return e.attributes.id_string}))})).then((function(e){0!==e.length&&(j(e),I(e).then((function(e){i(e.artists),O(!1)}))),O(!1)}))}),[t]),Object(a.jsxs)(le,{tabActive:"1",children:[Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)(l.b,{to:"/artists/search",children:Object(a.jsx)("svg",{className:"search-icon",children:Object(a.jsx)("use",{href:"".concat(ie,"#search-symbol")})})}),Object(a.jsx)("h3",{children:"MY MUSIC"})]}),0!==d.length&&!p&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"artists-items",children:s.map((function(e){var t;return Object(a.jsx)(l.b,{to:"/artists/".concat(e.id),children:Object(a.jsx)(se,{photoUrl:null===(t=e.images)||void 0===t?void 0:t[e.images.length-1].url,artistName:e.name})},e.id)}))})}),0===d.length&&p&&Object(a.jsx)(W,{title:"Loading..."}),0===d.length&&!p&&Object(a.jsx)(W,{title:"No data available",subtitle:"Search your favorite artist"})]})});de.defaultProps={user:0};var je=Object(i.b)((function(e){return{user:e.user}}))(de),be=(n(62),function(e){var t=e.path;return Object(a.jsx)(l.b,{to:t,children:Object(a.jsx)("svg",{className:"back-arrow-icon",children:Object(a.jsx)("use",{href:"".concat(ie,"#back-arrow")})})})}),he=(n(63),function(){var e,t={search:"",loading:!1},n=Object(r.useState)(t),c=Object(N.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)([]),l=Object(N.a)(o,2),j=l[0],h=l[1],p=Object(d.g)(),O=Object(r.useState)(!1),f=Object(N.a)(O,2),x=f[0],m=f[1],v=Object(r.useState)(!1),y=Object(N.a)(v,2),k=y[0],w=y[1];return Object(a.jsx)(le,{tabActive:"1",children:Object(a.jsx)("div",{className:"home-search",children:Object(a.jsxs)("div",{className:"home-search-content",children:[Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)(be,{path:"/artists"}),Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault(),h([]),""!==s.search&&(i(Object(u.a)(Object(u.a)({},s),{},{loading:!0})),L(s.search).then((function(e){null!==e&&i(t),h(e.artists.items[0])})))},children:Object(a.jsx)(_,{placeholder:"Search artist",name:"search",value:s.search,onchange:function(e){w(!1);var t="checkbox"===e.type?e.checked:e.value,n=e.name;i(Object(u.a)(Object(u.a)({},s),{},Object(g.a)({},n,t)))}})})]}),Object(a.jsxs)("div",{className:"body-home-search",children:[k&&Object(a.jsx)("p",{children:"This artist is already on your library"}),0!==j.length&&!s.loading&&!x&&Object(a.jsx)("div",{onClick:function(){m(!0);var e=j.id,t=j.name,n=j.images,a=n[n.length-1].url;F(e,t,a,b.a.get(K)).then((function(e){201===e.status?(m(!1),p.push("/")):(w(!0),m(!1))}))},onKeyUp:function(){},role:"button",tabIndex:"0",children:Object(a.jsx)(se,{photoUrl:null===j||void 0===j||null===(e=j.images[j.images.length-1])||void 0===e?void 0:e.url,artistName:j.name},j.id)})]}),(s.loading||x)&&Object(a.jsx)(W,{title:"Loading..."})]})})})}),pe=(n(64),function(e){return e.reduce((function(e,t){return+e+ +t.attributes.hours}),0)}),Oe=function(e,t){return e.filter((function(e){return t.some((function(t){return t.id===e.id}))}))},fe=function(e,t){return"".concat((pe(Oe(e,t))/36e5).toFixed(2))},xe=function(e,t){var n,a=Oe(e,t),r=null===(n=function(e){var t,n=1,a=0;if(1!==e.length)for(var r=0;r<e.length;r+=1){for(var c=r;c<e.length;c+=1)e[r].attributes.created_at===e[c].attributes.created_at&&(a+=1),n<a&&(n=a,t=e[r]);a=0}else t=Object(N.a)(e,1)[0];return t}(a=a.map((function(e){var t=e.attributes,n=e.attributes.created_at;return Object(u.a)(Object(u.a)({},e),{},{attributes:Object(u.a)(Object(u.a)({},t),{},{created_at:new Date(n).getDay(),created_at_string:n})})}))))||void 0===n?void 0:n.attributes.created_at;return"".concat(["su","mo","tu","we","th","fr","sa"][r])},me=function(){var e=Object(r.useState)([]),t=Object(N.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)([]),i=Object(N.a)(s,2),o=i[0],u=i[1],d=Object(r.useState)(!0),j=Object(N.a)(d,2),h=j[0],p=j[1];Object(r.useEffect)((function(){B(b.a.get(K)).then((function(e){200===e.status&&(p(!1),c(e.data.data),u(e.data.included))}))}),[]);var O=["colorPink","colorLettuce","colorDark","colorGreen"],f=-1;return Object(a.jsxs)(le,{tabActive:"2",children:[0!==n.length&&!h&&Object(a.jsx)("div",{className:"results-page",children:Object(a.jsxs)("div",{className:"results-content",children:[Object(a.jsxs)("div",{className:"header-results-page",children:[Object(a.jsx)("h3",{children:"Popular artists"}),Object(a.jsx)("div",{className:"popular-artists",children:n.map((function(e){var t=e.attributes;return Object(a.jsxs)("div",{className:"popular-artists-element",children:[Object(a.jsx)("img",{src:t.photoUrl,width:"68",alt:t.name}),Object(a.jsx)("p",{children:t.name})]},e.id)}))})]}),Object(a.jsx)("div",{className:"body-results-page",children:n.map((function(e,t){t===O.length&&(f=-1),f+=1;var n=e.attributes,r=e.relationships.stats.data;return Object(a.jsx)(l.b,{to:"/results/".concat(e.id),children:Object(a.jsx)("div",{id:O[f],className:"card-artist-container",children:Object(a.jsxs)("div",{className:"card-artist-content",children:[Object(a.jsx)("img",{src:n.photoUrl,alt:n.name,width:"120"}),Object(a.jsxs)("div",{className:"info-artista",children:[Object(a.jsx)("h3",{children:n.name}),Object(a.jsxs)("div",{className:"stats",children:[Object(a.jsxs)("div",{className:"stream",children:[Object(a.jsx)("span",{children:"STREAMS"}),Object(a.jsx)("p",{children:r.length})]}),Object(a.jsxs)("div",{className:"hours",children:[Object(a.jsx)("span",{children:"HOURS"}),Object(a.jsx)("p",{children:fe(o,r)})]}),Object(a.jsxs)("div",{className:"days",children:[Object(a.jsx)("span",{children:"DAYS"}),Object(a.jsx)("p",{children:xe(o,r).toUpperCase()})]})]})]})]})})},e.id)}))})]})}),0===n.length&&h&&Object(a.jsx)(W,{title:"Loading..."}),0===n.length&&!h&&Object(a.jsx)(W,{title:"No data available",subtitle:"Search your favorite artist"})]})},ve=(n(65),function(){var e,t=Object(r.useState)(!0),n=Object(N.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)([]),o=Object(N.a)(i,2),u=o[0],l=o[1],j=Object(r.useState)([]),h=Object(N.a)(j,2),p=h[0],O=h[1],f=Object(r.useState)({player:!1,idTrack:""}),x=Object(N.a)(f,2),m=x[0],v=x[1],g=Object(d.h)(),y=Object(r.useState)(""),k=Object(N.a)(y,2),w=k[0],S=k[1];Object(r.useEffect)((function(){Promise.all([C(g.id),D(g.id)]).then((function(e){null!==e&&s(!1),l(e[0]),O(e[1].tracks)}))}),[]);var _=0,T=0!==u.length&&0!==p.length;return Object(a.jsxs)(le,{tabActive:"1",playerActive:m.player,trackId:m.idTrack,children:[T&&!c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"header-artist-info",children:[Object(a.jsx)("div",{className:"hero-inner",style:{backgroundImage:"url(".concat(null===(e=u.images)||void 0===e?void 0:e[0].url,")")}}),Object(a.jsx)("p",{children:u.name}),Object(a.jsx)(be,{path:"/artists"})]}),Object(a.jsxs)("div",{className:"body-artist-info",children:[""!==w&&Object(a.jsx)("p",{children:"Playing track"}),Object(a.jsx)("h3",{children:"Popular"}),Object(a.jsx)("div",{className:"popular-items",children:null===p||void 0===p?void 0:p.map((function(e){var t,n;return _+=1,Object(a.jsxs)("div",{className:"track-item",onClick:(n=e,function(){var e=n.id,t=n.name;v({player:!0,idTrack:e}),G(e,t,n.duration_ms,u.id,b.a.get(K)).then((function(e){201===e.status&&S("stats saved")}))}),onKeyUp:function(){},role:"button",tabIndex:"0",children:[Object(a.jsx)("span",{children:_}),Object(a.jsx)("img",{src:null===(t=e.album.images)||void 0===t?void 0:t[e.album.images.length-1].url,alt:e.trackName,width:"45"}),Object(a.jsx)("p",{children:e.name})]},e.id)}))})]})]}),c&&Object(a.jsx)(W,{title:"Loading..."})]})}),ge=function(e){var t=new Date(e),n=t.getDate(),a=t.getDay();return"".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a]," ").concat(n)},ye=(n(66),function(e){var t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60),a=Math.floor(e/36e5%24);return a=a<10?"0".concat(a):a,n=n<10?"0".concat(n):n,t=t<10?"0".concat(t):t,"".concat(a,":").concat(n,":").concat(t)}),ke=function(e,t){return e.map((function(e){return{track:e.track.filter((function(e){return function(e,t){var n=!1;return new Date(e).getMonth()===t&&(n=!0),n}(e.attributes.created_at,t)}))}}))},we=function(){var e,t,n=Object(d.h)(),c=Object(r.useState)((new Date).getMonth()),s=Object(N.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)([]),j=Object(N.a)(l,2),b=j[0],h=j[1],p=Object(r.useState)(!0),O=Object(N.a)(p,2),f=O[0],x=O[1],m=Object(r.useState)([]),v=Object(N.a)(m,2),g=v[0],y=v[1],k=function(e){1===e&&0!==i?o(i-1):2===e&&11!==i&&o(i+1)};return Object(r.useEffect)((function(){var e=ke(g,i);h(Object(u.a)(Object(u.a)({},b),{},{included:e}))}),[i]),Object(r.useEffect)((function(){z(n.id).then((function(e){if(200===e.status){x(!1);var t=(r=e.data.included,c="spotify_track_id",r.reduce((function(e,t){return(e[t.attributes[c]]=e[t.attributes[c]]||[]).push(t),e}),{}));t=function(e){return Object.entries(e).map((function(e){return{track:e[1]}}))}(t);var n=e.data.data.attributes.name;y(t);var a=ke(t,i);h({name:n,included:a})}var r,c}))}),[]),Object(a.jsx)(le,{tabActive:"2",children:0===b.length||f?Object(a.jsx)(W,{title:"Loading..."}):Object(a.jsx)("div",{className:"result-track-container",children:Object(a.jsxs)("div",{className:"result-track-content",children:[Object(a.jsx)("div",{className:"header result-track-content-header",children:Object(a.jsx)(be,{path:"/results"})}),Object(a.jsxs)("div",{className:"result-track-content-body",children:[Object(a.jsx)("h2",{children:b.name}),Object(a.jsxs)("div",{className:"pick-date",children:[Object(a.jsx)("div",{className:"left-arrow",onClick:function(){return k(1)},onKeyUp:function(){},role:"button",tabIndex:"0",children:Object(a.jsx)("svg",{className:"icon left-arrow-icon",children:Object(a.jsx)("use",{href:"".concat(ie,"#back-arrow")})})}),Object(a.jsx)("div",{className:"text-date",children:null===(t=i,e=["january","february","march","april","may","june","july","august","september","october","november","december"][t])||void 0===e?void 0:e.toUpperCase()}),Object(a.jsx)("div",{className:"right-arrow",onClick:function(){return k(2)},onKeyUp:function(){},role:"button",tabIndex:"0",children:Object(a.jsx)("svg",{className:"icon right-arrow-icon",children:Object(a.jsx)("use",{href:"".concat(ie,"#back-arrow")})})})]}),Object(a.jsx)("div",{className:"result-tracking-info",children:b.included.filter((function(e){return 0!==e.track.length})).map((function(e){var t=e.track,n=(null===t||void 0===t?void 0:t[0]).attributes;return Object(a.jsxs)("div",{className:"result-tracking-item",children:[Object(a.jsxs)("div",{className:"date",children:[Object(a.jsx)("h4",{children:ge(n.created_at)}),Object(a.jsx)("p",{children:n.track_name})]}),Object(a.jsx)("div",{className:"hours",children:Object(a.jsx)("p",{children:"".concat(ye(pe(t)))})})]},t[0].id)}))})]})]})})})},Ne=function(e){return e.login?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/artists/search",component:he}),Object(a.jsx)(d.b,{path:"/artists/:id",component:ve}),Object(a.jsx)(d.b,{path:"/artists",component:je}),Object(a.jsx)(d.b,{path:"/results/:id",component:we}),Object(a.jsx)(d.b,{path:"/results",component:me}),Object(a.jsx)(d.b,{path:"/",component:je})]})}):Object(a.jsx)(d.a,{to:"/splash"})},Se=!!b.a.get(K);Ne.defaultProps={login:Se};var _e=Object(i.b)((function(e){return{login:e.login}}))(Ne),Te={setLogin:p,setUser:h},Ue=Object(i.b)(null,Te)((function(e){var t=e.setLogin,n=e.setUser,c=$.a.background;return Object(r.useEffect)((function(){var e=b.a.get(K);t(!!e),e?M(e).then((function(e){200===e.status?(t(!0),n(e.data.userId)):(t(!1),b.a.remove(K))})):t(!1)}),[]),Object(a.jsx)("div",{className:c,children:Object(a.jsx)(l.a,{children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/signup",component:X}),Object(a.jsx)(d.b,{path:"/login",component:re}),Object(a.jsx)(d.b,{path:"/splash",component:v}),Object(a.jsx)(d.b,{path:"/",component:_e})]})})})})),Ae=(n(67),Object(o.b)((function(e,t){var n=t.type,a=t.payload;switch(n){case"SET_USER":return Object(u.a)(Object(u.a)({},e),{},{user:a});case"SET_LOGIN":return Object(u.a)(Object(u.a)({},e),{},{login:a});default:return e}}),{}));s.a.render(Object(a.jsx)(i.a,{store:Ae,children:Object(a.jsx)(Ue,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.2a472529.chunk.js.map